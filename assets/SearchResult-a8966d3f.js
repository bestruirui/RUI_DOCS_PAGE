import{u as P,a as S,M as W,b as Z,d as q,e as U,f as V,L as B,g as A}from"./app-d4a355a5.js";import{r as k,h as R,c as $,y as _,U as ee,Y as te,o as se,z as ae,j as e,Z as C,w as le}from"./framework-e618a78f.js";const oe="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";const Y=()=>e(V,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));Y.displayName="CloseIcon";const T=()=>e(V,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));T.displayName="HeadingIcon";const M=()=>e(V,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));M.displayName="HeartIcon";const F=()=>e(V,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));F.displayName="HistoryIcon";const G=()=>e(V,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));G.displayName="TitleIcon";const ne={},ue=300,L=5,ce={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},re="search-pro-history-results",H=P(re,[]),ie=()=>({history:H,addHistory:s=>{H.value.length<L?H.value=[s,...H.value]:H.value=[s,...H.value.slice(0,L-1)]},removeHistory:s=>{H.value=[...H.value.slice(0,s),...H.value.slice(s+1)]}}),he=k(oe),ve=R(()=>JSON.parse(B(he.value))),E=(s,h)=>{const v=s.toLowerCase(),a=h.toLowerCase(),n=[];let l=0,i=0;const p=(t,d=!1)=>{let o="";i===0?o=t.length>20?`… ${t.slice(-20)}`:t:d?o=t.length+i>100?`${t.slice(0,100-i)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&n.push(o),i+=o.length,d||(n.push(["strong",h]),i+=h.length,i>=100&&n.push(" …"))};let m=v.indexOf(a,l);if(m===-1)return null;for(;m>=0;){const t=m+a.length;if(p(s.slice(l,m)),l=t,i>100)break;m=v.indexOf(a,l)}return i<100&&p(s.slice(l),!0),n},O=s=>s.reduce((h,{type:v})=>h+(v==="title"?50:v==="heading"?20:v==="custom"?10:1),0),pe=(s,h)=>{var v;const a={};for(const[n,l]of Object.entries(h)){const i=((v=h[n.replace(/\/[^\\]*$/,"")])==null?void 0:v.title)||"",p=`${i?`${i} > `:""}${l.title}`,m=E(l.title,s);m&&(a[p]=[...a[p]||[],{type:"title",path:n,display:m}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(o=>{const u=E(o,s);u&&(a[p]=[...a[p]||[],{type:"custom",path:n,index:t,display:u}])})});for(const t of l.contents){const d=E(t.header,s);d&&(a[p]=[...a[p]||[],{type:"heading",path:n+(t.slug?`#${t.slug}`:""),display:d}]);for(const o of t.contents){const u=E(o,s);u&&(a[p]=[...a[p]||[],{type:"content",header:t.header,path:n+(t.slug?`#${t.slug}`:""),display:u}])}}}return Object.keys(a).sort((n,l)=>O(a[n])-O(a[l])).map(n=>({title:n,contents:a[n]}))},de=s=>{const h=S(),v=k([]),a=R(()=>ve.value[h.value]),n=A(l=>{v.value=l?pe(l,a.value):[]},ue);return le([s,h],()=>{n(s.value)}),v};var He=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:s=>!0},setup(s,{emit:h}){const v=_(),a=ee(),n=S(),l=W(ce),{history:i,addHistory:p,removeHistory:m}=ie(),t=te(s,"query"),d=de(t),o=k(0),u=k(0),j=k(),g=R(()=>d.value.length>0),N=R(()=>d.value[o.value]||null),X=()=>{o.value=o.value>0?o.value-1:d.value.length-1,u.value=N.value.contents.length-1},w=()=>{o.value=o.value<d.value.length-1?o.value+1:0,u.value=0},Q=()=>{u.value<N.value.contents.length-1?u.value=u.value+1:w()},J=()=>{u.value>0?u.value=u.value-1:X()},x=c=>c.map(r=>typeof r=="string"?r:e(r[0],r[1])),I=c=>{if(c.type==="custom"){const r=ne[c.index]||"$content",[f,D=""]=typeof r=="object"?r[n.value].split("$content"):r.split("$content");return x([f,...c.display,D])}return x(c.display)},b=()=>{o.value=0,u.value=0,h("updateQuery",""),h("close")};return se(()=>{Z("keydown",c=>{if(g.value){if(c.key==="ArrowUp")J();else if(c.key==="ArrowDown")Q();else if(c.key==="Enter"){const r=N.value.contents[u.value];a.path!==r.path&&(p(r),v.push(r.path),b())}}}),q(j.value,{reserveScrollBarGap:!0})}),ae(()=>{U()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?i.value.length===0:!g.value}],ref:j},t.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),i.value.map((c,r)=>e(C,{to:c.path,class:["search-pro-result-item",{active:u.value===r}],onClick:()=>{console.log("click"),b()}},()=>[e(F,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[c.type==="content"&&c.header?e("div",{class:"content-header"},c.header):null,e("div",I(c))]),e("button",{class:"search-pro-close-icon",onClick:f=>{f.preventDefault(),f.stopPropagation(),m(r)}},e(Y))]))])):l.value.emptyHistory:g.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:c,contents:r},f)=>{const D=o.value===f;return e("li",{class:["search-pro-result-list-item",{active:D}]},[e("div",{class:"search-pro-result-title"},c||"Documentation"),r.map((y,K)=>{const z=D&&u.value===K;return e(C,{to:y.path,class:["search-pro-result-item",{active:z,"aria-selected":z}],onClick:()=>{p(y),b()}},()=>[y.type==="content"?null:e(y.type==="title"?G:y.type==="heading"?T:M,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",I(y))])])})])})):l.value.emptyResult)}});export{He as default};
