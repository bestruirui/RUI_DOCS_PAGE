import{u as X,a as N,M as G,b as O,d as J,e as x,f as g,L as T,g as Y}from"./app-f3bb7806.js";import{r as m,h as W,c as $,y as _,U as ee,Y as te,o as ae,z as le,j as e,Z as U,w as se}from"./framework-e618a78f.js";const oe="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";const F=()=>e(g,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));F.displayName="CloseIcon";const B=()=>e(g,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));B.displayName="HeadingIcon";const S=()=>e(g,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));S.displayName="HeartIcon";const Z=()=>e(g,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));Z.displayName="HistoryIcon";const A=()=>e(g,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));A.displayName="TitleIcon";const ce={},ne=300,E=5,ue={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},re="search-pro-history-results",L=X(re,[]),ie=()=>({history:L,addHistory:a=>{L.value.length<E?L.value=[a,...L.value]:L.value=[a,...L.value.slice(0,E-1)]},removeHistory:a=>{L.value=[...L.value.slice(0,a),...L.value.slice(a+1)]}}),ve=m(oe),pe=W(()=>JSON.parse(T(ve.value))),D=(a,v)=>{const p=a.toLowerCase(),l=v.toLowerCase(),c=[];let s=0,i=0;const h=(t,d=!1)=>{let o="";i===0?o=t.length>20?`… ${t.slice(-20)}`:t:d?o=t.length+i>100?`${t.slice(0,100-i)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&c.push(o),i+=o.length,d||(c.push(["strong",v]),i+=v.length,i>=100&&c.push(" …"))};let y=p.indexOf(l,s);if(y===-1)return null;for(;y>=0;){const t=y+l.length;if(h(a.slice(s,y)),s=t,i>100)break;y=p.indexOf(l,s)}return i<100&&h(a.slice(s),!0),c},I=a=>a.reduce((v,{type:p})=>v+(p==="title"?50:p==="heading"?20:p==="custom"?10:1),0),he=(a,v)=>{var p;const l={};for(const[c,s]of Object.entries(v)){const i=((p=v[c.replace(/\/[^\\]*$/,"")])==null?void 0:p.title)||"",h=`${i?`${i} > `:""}${s.title}`,y=D(s.title,a);y&&(l[h]=[...l[h]||[],{type:"title",path:c,display:y}]),s.customFields&&Object.entries(s.customFields).forEach(([t,d])=>{d.forEach(o=>{const n=D(o,a);n&&(l[h]=[...l[h]||[],{type:"custom",path:c,index:t,display:n}])})});for(const t of s.contents){const d=D(t.header,a);d&&(l[h]=[...l[h]||[],{type:"heading",path:c+(t.slug?`#${t.slug}`:""),display:d}]);for(const o of t.contents){const n=D(o,a);n&&(l[h]=[...l[h]||[],{type:"content",header:t.header,path:c+(t.slug?`#${t.slug}`:""),display:n}])}}}return Object.keys(l).sort((c,s)=>I(l[c])-I(l[s])).map(c=>({title:c,contents:l[c]}))},de=a=>{const v=N(),p=m([]),l=W(()=>pe.value[v.value]),c=Y(s=>{p.value=s?he(s,l.value):[]},ne);return se([a,v],()=>{c(a.value)}),p};var Le=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:v}){const p=_(),l=ee(),c=N(),s=G(ue),{history:i,addHistory:h,removeHistory:y}=ie(),t=te(a,"query"),d=de(t),o=m(0),n=m(0),V=m(),z=W(()=>d.value.length>0),b=W(()=>d.value[o.value]||null),w=()=>{o.value=o.value>0?o.value-1:d.value.length-1,n.value=b.value.contents.length-1},P=()=>{o.value=o.value<d.value.length-1?o.value+1:0,n.value=0},C=()=>{n.value<b.value.contents.length-1?n.value=n.value+1:P()},Q=()=>{n.value>0?n.value=n.value-1:w()},q=u=>u.map(r=>typeof r=="string"?r:e(r[0],r[1])),K=u=>{if(u.type==="custom"){const r=ce[u.index]||"$content",[f,k=""]=typeof r=="object"?r[c.value].split("$content"):r.split("$content");return q([f,...u.display,k])}return q(u.display)},j=()=>{o.value=0,n.value=0,v("updateQuery",""),v("close")};return ae(()=>{O("keydown",u=>{if(z.value){if(u.key==="ArrowUp")Q();else if(u.key==="ArrowDown")C();else if(u.key==="Enter"){const r=b.value.contents[n.value];l.path!==r.path&&(h(r),p.push(r.path),j())}}}),J(V.value,{reserveScrollBarGap:!0})}),le(()=>{x()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?i.value.length===0:!z.value}],ref:V},t.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},s.value.history),i.value.map((u,r)=>e(U,{to:u.path,class:["search-pro-result-item",{active:n.value===r}],onClick:()=>{console.log("click"),j()}},()=>[e(Z,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[u.type==="content"&&u.header?e("div",{class:"content-header"},u.header):null,e("div",K(u))]),e("button",{class:"search-pro-close-icon",onClick:f=>{f.preventDefault(),f.stopPropagation(),y(r)}},e(F))]))])):s.value.emptyHistory:z.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:u,contents:r},f)=>{const k=o.value===f;return e("li",{class:["search-pro-result-list-item",{active:k}]},[e("div",{class:"search-pro-result-title"},u||"Documentation"),r.map((H,M)=>{const R=k&&n.value===M;return e(U,{to:H.path,class:["search-pro-result-item",{active:R,"aria-selected":R}],onClick:()=>{h(H),j()}},()=>[H.type==="content"?null:e(H.type==="title"?A:H.type==="heading"?B:S,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[H.type==="content"&&H.header?e("div",{class:"content-header"},H.header):null,e("div",K(H))])])})])})):s.value.emptyResult)}});export{Le as default};
