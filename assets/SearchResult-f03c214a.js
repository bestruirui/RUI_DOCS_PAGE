import{u as T,a as z,M as K,b as B,d as I,e as J,f as g,L as Q,g as q}from"./app-d3dfeb8e.js";import{r as f,h as H,c as $,y as _,U as ee,Y as te,o as se,z as ae,j as e,Z as j,w as le}from"./framework-e618a78f.js";const oe="eJy1WntPG0m2/yol/rkTKYaQ7OreG2lGNwmTDFeThyaPXd2bq1FjN9Cbdrev3YYwo0i8DOZpyADh4QRIeE0SbLIhCdgYPsy6utt/5Svsr6radrvtJmRXKyXIfepU1XnXOafq16aWpsv40yF3KVpztxFW2aehGKrcdLnJWsnQwnzT+aagrhmyZsSaLv/vr03dshSSoxjGQEyNd+EX3d0qHq7VIv7fk/MNcaPhs+GpihZ/fDbUkB58BNCZcHvljrMh0oMDa27HLmSL+Y9nnJH4WMwvnA3Xmls19/NeXGA3tcRUJSTH6pRBD/PWQNYaG63boKnlR1mKal+hRDFJ6ZT/McU3NzdXOWnIgyDoSiSiKkHJUHSNm1mFldNEW57cxpVaM0+AfMn6QenqVvHfINdlyYhH5ViVyu7yWKCzOuarp6sS28WZ2sE/XLiA/AIIk0LttOu6Xp3WyT/c06JSX2VaPaPA7FS66tXOZWUtD9PZQjG/4cu8fTJjr09WkBwiPFBfhm/fudd++9ZdO7tvLk5Xp+sRprtYBezmJhAilwmdmaapPbELxgOKAWAxt1HMPTV31ulRqjoUIZcuXLhwmf0Bjjk5SjPL1pssTb0yF9fo3vDno8niQd5M576hmRP8OicGL9PMIV3aER9snYAmhWXSIceMaFxhJPBxOjNFd5/x8ZAWI62trc3sX3NrZa+2W3fN9BQdXwe2WEc2vn3Y1BFVQl3yw6YKnrPf8rBVmLXyaetdnr6YYBN6SIsINJdbpEgE+FZ+lvHAfaWeeg4uU1/2p4BM7v3Pt1diitRyt1vSurolxoI1naUvh2hqsTSa+ny0bD77SCdznEbYqSFFjW8ltVfqiwG1NDpFZ7LW7oI1vwkMz6emk1J+0c5s0P4jUGSv71gbOUFCqb+fjuawNOCCjeLBlD36mo7viEUEGhZx9vJMM/vz5mJWoAJJ1wKdkqLCkYg9sVmRmUC3xoE+UHr+4gI2o8klsV/DzeKaKsdigZihRyJy6LRNmYQLI4zo/iF7aVZ4Dc0kzfEN+2TF2plgy47vMOHtvaOf/mrlU3Qgbe6+ZL4jtqu1eYHv9RgP1NdjzBfDNO/ItjrbA3X7i5magTIAFGub6X44D2gjzYQxNVSw0gNMix4ikytYUJiii8haqC+RYSnYo0qad7oX7Be/ncgUj8Ul9ZTA1IBbFw139KghKRqP287+ERfILSJHp6msvT1CJxeszLo1M/KN+W6MfYwlz3lkcyWqSBcDd6KuoCtxUISDaoS/sk83C4JewucRsVnZ4ubTdCjlWb/0/GnpeKn0/KX5/KS6hQfq3gXRAOZXzOcRZRyERisauq5613NgNavxeACzQTylnzZp4pOXf1WJGS7enU/3GkzFK4si/NDkMxYQ4Cg5L6dBPSQHYnK0x62lWqB7VeRQUEdPjGF4VrLm0tb7BXoyZA67ZOaB1mhm5kXp6TuoxbtQYRb4xdysaxUX6CxLPLiIE1eqzu8pf9dI+WDLTI+Bo7iCFfgUYXdCUCyApbLFQrp4kCv1p3AMMioS7z1bRYOqrsmuJLf87REbNhlLeuaGcGAFulxGXAW4ZzOo1wBCN+JSNOQygVCXA6hhcTpPD0/o7Hht3vEjS7Br8isO8XVk8+1L+2Tamp+EabsiXi3UNxRVjsCyMhukmMg3ZK03ahCAr6gRRAjSiGRD17r68L8uJJX6l+HiX0iUzNVNKz1x7c790stZa5pl02VO+EAwEq8M+DJjb7+i0xPW0e+uTMsF8ounP92sEfdPN32T3z99f7UGFd+n4sphHMb18hjMIMNGIlYXqhrWJB5llF4O29vMWH0yeg2VQ6393LrRfuvPvnTWzw3q4bCkhXyOli/p8VU/NFZKTFmFjLkwKkqJsiobjZ2lSinTpXXWC9N3NfdxnUKqMlvMv0IAMVdnigevK4lr+ej2x/A1tx/u3btz11XLGEakrnyp8xLhQDX6ESBf4ov5CSs/Vd2n8u1LmOOkfEOCTK140M8YmnhrvZlANP0bTwLpPLK2ZeeTeyg7hMWc4sFvCKzme54WZsZoYsfs3waelemnU/P4zXLKN4tWbhvTzOQnO3NsIzoj6UjNoq5AMCX06aT9YdjMzZjzSbjt3/oH3Ucioy/AWwmBr6LPmfPP0xdoSJ9/mBw7tAYPXWGy/O07o1j4zdrO0r2US3EukNujveqiK/tWfp6E4zGVqEpHkMmSdMRjfR06xnkqy8UyaJ8sFQsn9PgZzQzR4yRWtvtR78wx6R0c2OODyF0Fk+W0nCdV6X57a4Altx8T9sko+Q9y8yo7Tw8/YirLf/dSkKn9KkGTe9arASQqYgbd2LZyW6T10gVMIEyYu4t0cMf6PVd6ts/k5xEZ14VLZOVvP9YrhiDIF/hunTEiwejeiJ2dpyvH9kna2soXC2vAMRcOUdWCCCBAJKyNgbLmE8s+6GRCZA5gXYo8wiK3cZz9dI0oGspi633eyq+yomx42Uy/Lf3+DmUGZsFiEFZYcZNPmLsbkCtql89HA0zksLwkQsVblgMerxRzsFNuv5xgWKF5kDCX9qreJOpIrGX+dR1JjTnWj7+MsqXXpdX3IFosxxKa/KY1/JFV7+kd7EpXc9Y6lh43PyF3XSutH+J4xnToQzDW6Bh2AoyioURV6w8fwbBQ8NcfPubaaOnlIjHHF2lqDdUwXV2lIwnYFcsNKqWUvbvlk9bcefB9TejDt+/BVJ3Bi+06ToSe6dgUZFE8yZhzHn88Ez/vd8xh5o9QAestcE399x9aL/4R6sLW/958MXCJFYfpHXrUT7cnsB3NHgohor6FYTLl51ZgOzS9h4LIocRTlU69hBO6DsLyd00+uDci1hW9AmbViE5TL5m9HSTo1DSbUruuFDFEu65mdQ/Us0eLbATRKTFaYno8GkRHk9UnQonmyonYz7MNBNFgm0iP/LXbNIdaMCsANDkaiSoxmUP9tlUfBxts64HWaHNsmytkAkkvHJWmNtE7YsmKt3hfKy1tEFUPSmpA7QkTmkRdywy3UsczhEAFIVBBqEnEBk4okg8e/swPr+39QxZGeAAmkBgpbS2U1j8w7108hl8w8+K4dOz3YmEJlDENL2YFHQ4NLEhM79hTM+bCHhyUr4PaVViaiEnCGsFeaXQScq4QKYh+qD3URAixjhbs41k+LNY+L5SMw7LUP/ZQ83PPeEdcM+J13ibAYIVOrVsr+ziR/1Xe5jlHuT9dbb/tyrQErEPRPekWDOA3uOmDe4E2wtx1Jnvt7k2C/2AYwbN4sMvyAh5FS0MFAGFzqtwlBfsaGHxZ2C5rL4N8D32nSzWSMNcO2m/fvHnfnMuakwN1bSyOoCDNjlcQ3GwI/gh3oZDcKcVVo6UrGu8QDNz46f7Vn6/dbPux/db3P+PP/T//3Pb99Sv3f7wHdtCn9Fr7+JpdKFjrb+EyQnHWygFKZdYIfs5as2XSvoRXTyEnMKyH4mgWMsvlpxTOMHigsDXMqsVEC6hDdqJAhyoFH/GowBL7xvM9YXRlH34hMv7iybo5wFqe5ZDaaKxBcBCrixrGk7DwvjEUw4w8udfTqeheGZ2GUrMXr1kFHnakqXH6ao85zvJwextURMy1Q3Mq094mpCMiVvUyoVGv0V5aNidW0cn2thvdA/7ZKN+ncVXWcMxH2dBbi4b2Ugw3VLzT3/L/cjjutKNaWi9c4LpEWMJPzljuwU3S3kaEw7v3EJ15pJUIgdbbtzhF2Y3I00n2O4cW+WSj+OQ0ImpSCAf2hTSiPPMfuc5xLXbb6Aaf11Q9HrquSlG55VocPfJwm45CX4vjWiYsw8L1+mRFjOG8wDHBUtPMcvFwjGVPM/WVnO9mf1G0rscK7ifqq2DeKGVtxTdLZ18P3vi4r14WrlL4tIoaGOb8Pkt8y9tWa+n6Mf+YybEFHrp+NDtirbkjps+wX5UtmLyhGN3xDiSO8RCQ6pPgufd29hOux3Hfy9JoXy5HR+jGqPkcx7Gbv1poTeKDG/eTdVBrZ2HY05+PkvbEOxj856MxFgsP+nEtZ819sIdZs9TanmUkVK60+HFY17hllKJMQ9/T3bitgdZQkEgK+kRRUiGI1TScJgEx11+Z60mWtbNSg4crJCuIQiKrNj+k0GTiV2T75vSmdZK3s7Nmcgbc2NldRjuH0MwkgEg2zMmx660XWZacGLL2Uamwpczx8c64qgaY5YscD8hROawbMmGaYdeuZvI1Sjn86FW01lZxwn5XWp6xtgcQDCq1/XfFAgsd34nUWHywE2N83A0REUdUfmDTXFuvYNKZSeRRVn6pwpkz5flQaYnlkSJ1gN38EO/ANaYmdyoQaKWWYcqbQrQSOkMhCAj6eFbmXWk5haSGbcF3pOtvKqUnA24NFgvzQqjCKEWZR1ODuDATYRFLtZNuRChi6KRLNghMmAsIOiVBOWoonU4jjOidRKxyHjQGpXhMJn3Ir4ke7ZI05ReO9G8xzyQlRsI6bgSluNGtRxUD0B75POntVoLdbBDm0yNrCtutU8dazINISO6RVT0SrqOhmVxxKGQXvky350k7kdSYTnolIIMHlXmi2BMh5i9y0CCPNL1XlXGlS0BQF2eBoMdIGAeK0YwVgpImVolHVF0KkXAfCAtxmbDd0AiJStE+TmGsGxdKiILkHgZY5CWReDSis6Vi1f3LyxvdgDYUJ9uWy90hqFdRVfzukb1o93Ap/IhJmj2wQEZfPFpD30H4GbvAQiLPowErAHhiLtwG5kmTy+bYlLBy5umJbTwVMScW4Lus/7/3TlzDV0tnkdcDeQwezDeC3QlkbjhYU1AbkENxQV8ANxjNsUvNUlj6Rdek3hgO4TBvVLwWJ4yI5cxfeALOfqDLlHot4ByTxwqOLGz7rqwytUF9MDmjDzJCutwmGbgMjgW7cSuGU13QjWswb5qGkDC+6krNyt/uOCWcBHFDbG9+GEAssz/sIRcyn286YWf7KVj3lipo11+9f6MmBygNjLJmFTKMZxn0J3zj+TUJPRG9y3WZVgG4absl9ShdwnfEk5O7ePoj3ptcjWKtYDQeZs+V8LAEhSx+3JG6WP/2Bx0e4fy+y58LsR+9igE/g3uG+ZLsEgVWCsuNAJPE+LAcO08k0hWVQrjTJUZU0mIK378yTRhnh0xCSiyiSn1yCNYbhn5grbjIj3NHbSEd4IYY8mP2lsbzoMWRm4HEre5AxBFlvVlD9o3z9evrOjuDipa14ciDuHwHjyNiBKc1GqSiYCE3peijkN6rEZH6iZqHZo9oAten7HGWgNf3EEXC6LqULX/7XwFld833rq5j5bsmoeXhmPyXogVVhIVvOhVVZs9XzhFBVJUcHI9bg+aLNCJ/aWiH1dEuBP70Yc1xS/FIhY+yo3Z90pzfw/S6PX7lzSy0QEJPzp0y7jPozPP429GcCB5lfyt/u3murNWMkjKsN8c0BU87jOZw6NxlZsrYgWg6OwHiGrup9Mf/9Y+B/3zSaJJHd5X+u1sfHmitVtbsE/QVmThFIuCEpeyh/Q53ZZvVvHkyQWfeCCXYn7L0eJjlChzI+z85obri8QS0h4dPZSWV9R6LBgFkd8esw8aXoRuHLPtPvkEEFLNZ/3VjQRzhsAAsYg69R2XjtWYn1M8ds+wn86K0lHCs/NmAfcxaQuJ5DD2YNNMrrD2NTu8srhwQ6XIiT3LbERapOpFTzR7sCnHwgHFHMhBz8JZK9DRY9ziNJAn54JaVHxGVLzuGkN6mBkuLiZpJwsNqY8K127eut9eGU9F3buRsLv22a0YUpX/QiWmOfpVaqFu/f0Kwi0fYIxPYi06cB3/nSf2DvTYZ71BU1zPBUAVwhod7VZ4ahjoh8y8wV2lflFP+8rd/GdNwRqD1lFKF3RBD1y0XL1y8FGgNtP6hjtbKyKm3zGwN9yx8e/GfPPk7mGMULQ==";const X=()=>e(g,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));X.displayName="CloseIcon";const A=()=>e(g,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));A.displayName="HeadingIcon";const C=()=>e(g,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));C.displayName="HeartIcon";const U=()=>e(g,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));U.displayName="HistoryIcon";const P=()=>e(g,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));P.displayName="TitleIcon";const ne={},ce=300,x=5,re={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},ie="search-pro-history-results",L=T(ie,[]),ue=()=>({history:L,addHistory:s=>{L.value.length<x?L.value=[s,...L.value]:L.value=[s,...L.value.slice(0,x-1)]},removeHistory:s=>{L.value=[...L.value.slice(0,s),...L.value.slice(s+1)]}}),he=f(oe),de=H(()=>JSON.parse(Q(he.value))),b=(s,h)=>{const d=s.toLowerCase(),a=h.toLowerCase(),n=[];let l=0,u=0;const v=(t,p=!1)=>{let o="";u===0?o=t.length>20?`… ${t.slice(-20)}`:t:p?o=t.length+u>100?`${t.slice(0,100-u)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&n.push(o),u+=o.length,p||(n.push(["strong",h]),u+=h.length,u>=100&&n.push(" …"))};let y=d.indexOf(a,l);if(y===-1)return null;for(;y>=0;){const t=y+a.length;if(v(s.slice(l,y)),l=t,u>100)break;y=d.indexOf(a,l)}return u<100&&v(s.slice(l),!0),n},W=s=>s.reduce((h,{type:d})=>h+(d==="title"?50:d==="heading"?20:d==="custom"?10:1),0),ve=(s,h)=>{var d;const a={};for(const[n,l]of Object.entries(h)){const u=((d=h[n.replace(/\/[^\\]*$/,"")])==null?void 0:d.title)||"",v=`${u?`${u} > `:""}${l.title}`,y=b(l.title,s);y&&(a[v]=[...a[v]||[],{type:"title",path:n,display:y}]),l.customFields&&Object.entries(l.customFields).forEach(([t,p])=>{p.forEach(o=>{const c=b(o,s);c&&(a[v]=[...a[v]||[],{type:"custom",path:n,index:t,display:c}])})});for(const t of l.contents){const p=b(t.header,s);p&&(a[v]=[...a[v]||[],{type:"heading",path:n+(t.slug?`#${t.slug}`:""),display:p}]);for(const o of t.contents){const c=b(o,s);c&&(a[v]=[...a[v]||[],{type:"content",header:t.header,path:n+(t.slug?`#${t.slug}`:""),display:c}])}}}return Object.keys(a).sort((n,l)=>W(a[n])-W(a[l])).map(n=>({title:n,contents:a[n]}))},pe=s=>{const h=z(),d=f([]),a=H(()=>de.value[h.value]),n=q(l=>{d.value=l?ve(l,a.value):[]},ce);return le([s,h],()=>{n(s.value)}),d};var Le=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:s=>!0},setup(s,{emit:h}){const d=_(),a=ee(),n=z(),l=K(re),{history:u,addHistory:v,removeHistory:y}=ue(),t=te(s,"query"),p=pe(t),o=f(0),c=f(0),V=f(),F=H(()=>p.value.length>0),M=H(()=>p.value[o.value]||null),Y=()=>{o.value=o.value>0?o.value-1:p.value.length-1,c.value=M.value.contents.length-1},G=()=>{o.value=o.value<p.value.length-1?o.value+1:0,c.value=0},Z=()=>{c.value<M.value.contents.length-1?c.value=c.value+1:G()},D=()=>{c.value>0?c.value=c.value-1:Y()},w=r=>r.map(i=>typeof i=="string"?i:e(i[0],i[1])),E=r=>{if(r.type==="custom"){const i=ne[r.index]||"$content",[N,k=""]=typeof i=="object"?i[n.value].split("$content"):i.split("$content");return w([N,...r.display,k])}return w(r.display)},S=()=>{o.value=0,c.value=0,h("updateQuery",""),h("close")};return se(()=>{B("keydown",r=>{if(F.value){if(r.key==="ArrowUp")D();else if(r.key==="ArrowDown")Z();else if(r.key==="Enter"){const i=M.value.contents[c.value];a.path!==i.path&&(v(i),d.push(i.path),S())}}}),I(V.value,{reserveScrollBarGap:!0})}),ae(()=>{J()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!F.value}],ref:V},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),u.value.map((r,i)=>e(j,{to:r.path,class:["search-pro-result-item",{active:c.value===i}],onClick:()=>{console.log("click"),S()}},()=>[e(U,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",E(r))]),e("button",{class:"search-pro-close-icon",onClick:N=>{N.preventDefault(),N.stopPropagation(),y(i)}},e(X))]))])):l.value.emptyHistory:F.value?e("ul",{class:"search-pro-result-list"},p.value.map(({title:r,contents:i},N)=>{const k=o.value===N;return e("li",{class:["search-pro-result-list-item",{active:k}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),i.map((m,O)=>{const R=k&&c.value===O;return e(j,{to:m.path,class:["search-pro-result-item",{active:R,"aria-selected":R}],onClick:()=>{v(m),S()}},()=>[m.type==="content"?null:e(m.type==="title"?P:m.type==="heading"?A:C,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[m.type==="content"&&m.header?e("div",{class:"content-header"},m.header):null,e("div",E(m))])])})])})):l.value.emptyResult)}});export{Le as default};
