import{u as I,a as U,M as J,b as C,d as N,e as j,f as g,L as q,g as X}from"./app-4aae3fe1.js";import{r as S,h as F,c as $,y as _,U as ee,Y as ae,o as te,z as se,j as e,Z as x,w as le}from"./framework-e618a78f.js";const ce="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";const R=()=>e(g,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));R.displayName="CloseIcon";const D=()=>e(g,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));D.displayName="HeadingIcon";const E=()=>e(g,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));E.displayName="HeartIcon";const K=()=>e(g,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));K.displayName="HistoryIcon";const O=()=>e(g,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));O.displayName="TitleIcon";const ne={},re=300,M=5,oe={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},ie="search-pro-history-results",d=I(ie,[]),ue=()=>({history:d,addHistory:t=>{d.value.length<M?d.value=[t,...d.value]:d.value=[t,...d.value.slice(0,M-1)]},removeHistory:t=>{d.value=[...d.value.slice(0,t),...d.value.slice(t+1)]}}),ve=S(ce),he=F(()=>JSON.parse(q(ve.value))),B=(t,v)=>{const h=t.toLowerCase(),s=v.toLowerCase(),n=[];let l=0,u=0;const p=(a,m=!1)=>{let c="";u===0?c=a.length>20?`… ${a.slice(-20)}`:a:m?c=a.length+u>100?`${a.slice(0,100-u)}… `:a:c=a.length>20?`${a.slice(0,20)} … ${a.slice(-20)}`:a,c&&n.push(c),u+=c.length,m||(n.push(["strong",v]),u+=v.length,u>=100&&n.push(" …"))};let f=h.indexOf(s,l);if(f===-1)return null;for(;f>=0;){const a=f+s.length;if(p(t.slice(l,f)),l=a,u>100)break;f=h.indexOf(s,l)}return u<100&&p(t.slice(l),!0),n},P=t=>t.reduce((v,{type:h})=>v+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),pe=(t,v)=>{var h;const s={};for(const[n,l]of Object.entries(v)){const u=((h=v[n.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",p=`${u?`${u} > `:""}${l.title}`,f=B(l.title,t);f&&(s[p]=[...s[p]||[],{type:"title",path:n,display:f}]),l.customFields&&Object.entries(l.customFields).forEach(([a,m])=>{m.forEach(c=>{const r=B(c,t);r&&(s[p]=[...s[p]||[],{type:"custom",path:n,index:a,display:r}])})});for(const a of l.contents){const m=B(a.header,t);m&&(s[p]=[...s[p]||[],{type:"heading",path:n+(a.slug?`#${a.slug}`:""),display:m}]);for(const c of a.contents){const r=B(c,t);r&&(s[p]=[...s[p]||[],{type:"content",header:a.header,path:n+(a.slug?`#${a.slug}`:""),display:r}])}}}return Object.keys(s).sort((n,l)=>P(s[n])-P(s[l])).map(n=>({title:n,contents:s[n]}))},me=t=>{const v=U(),h=S([]),s=F(()=>he.value[v.value]),n=X(l=>{h.value=l?pe(l,s.value):[]},re);return le([t,v],()=>{n(t.value)}),h};var de=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:t=>!0},setup(t,{emit:v}){const h=_(),s=ee(),n=U(),l=J(oe),{history:u,addHistory:p,removeHistory:f}=ue(),a=ae(t,"query"),m=me(a),c=S(0),r=S(0),b=S(),W=F(()=>m.value.length>0),A=F(()=>m.value[c.value]||null),Z=()=>{c.value=c.value>0?c.value-1:m.value.length-1,r.value=A.value.contents.length-1},Y=()=>{c.value=c.value<m.value.length-1?c.value+1:0,r.value=0},w=()=>{r.value<A.value.contents.length-1?r.value=r.value+1:Y()},k=()=>{r.value>0?r.value=r.value-1:Z()},G=o=>o.map(i=>typeof i=="string"?i:e(i[0],i[1])),Q=o=>{if(o.type==="custom"){const i=ne[o.index]||"$content",[z,V=""]=typeof i=="object"?i[n.value].split("$content"):i.split("$content");return G([z,...o.display,V])}return G(o.display)},L=()=>{c.value=0,r.value=0,v("updateQuery",""),v("close")};return te(()=>{C("keydown",o=>{if(W.value){if(o.key==="ArrowUp")k();else if(o.key==="ArrowDown")w();else if(o.key==="Enter"){const i=A.value.contents[r.value];s.path!==i.path&&(p(i),h.push(i.path),L())}}}),N(b.value,{reserveScrollBarGap:!0})}),se(()=>{j()}),()=>e("div",{class:["search-pro-result",{empty:a.value===""?u.value.length===0:!W.value}],ref:b},a.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),u.value.map((o,i)=>e(x,{to:o.path,class:["search-pro-result-item",{active:r.value===i}],onClick:()=>{console.log("click"),L()}},()=>[e(K,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[o.type==="content"&&o.header?e("div",{class:"content-header"},o.header):null,e("div",Q(o))]),e("button",{class:"search-pro-close-icon",onClick:z=>{z.preventDefault(),z.stopPropagation(),f(i)}},e(R))]))])):l.value.emptyHistory:W.value?e("ul",{class:"search-pro-result-list"},m.value.map(({title:o,contents:i},z)=>{const V=c.value===z;return e("li",{class:["search-pro-result-list-item",{active:V}]},[e("div",{class:"search-pro-result-title"},o||"Documentation"),i.map((y,H)=>{const T=V&&r.value===H;return e(x,{to:y.path,class:["search-pro-result-item",{active:T,"aria-selected":T}],onClick:()=>{p(y),L()}},()=>[y.type==="content"?null:e(y.type==="title"?O:y.type==="heading"?D:E,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",Q(y))])])})])})):l.value.emptyResult)}});export{de as default};
