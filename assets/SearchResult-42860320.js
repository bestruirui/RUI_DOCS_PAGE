import{u as j,a as b,M as P,b as J,d as Q,e as O,f as g,L as D,g as B}from"./app-912ce42c.js";import{r as f,h as w,c as $,y as _,U as ee,Y as se,o as ae,z as te,j as e,Z,w as le}from"./framework-e618a78f.js";const ce="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";const G=()=>e(g,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));G.displayName="CloseIcon";const M=()=>e(g,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));M.displayName="HeadingIcon";const X=()=>e(g,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));X.displayName="HeartIcon";const I=()=>e(g,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));I.displayName="HistoryIcon";const W=()=>e(g,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));W.displayName="TitleIcon";const ne={},oe=300,K=5,re={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},ue="search-pro-history-results",z=j(ue,[]),ie=()=>({history:z,addHistory:a=>{z.value.length<K?z.value=[a,...z.value]:z.value=[a,...z.value.slice(0,K-1)]},removeHistory:a=>{z.value=[...z.value.slice(0,a),...z.value.slice(a+1)]}}),ve=f(ce),pe=w(()=>JSON.parse(D(ve.value))),S=(a,v)=>{const p=a.toLowerCase(),t=v.toLowerCase(),n=[];let l=0,i=0;const d=(s,h=!1)=>{let c="";i===0?c=s.length>20?`… ${s.slice(-20)}`:s:h?c=s.length+i>100?`${s.slice(0,100-i)}… `:s:c=s.length>20?`${s.slice(0,20)} … ${s.slice(-20)}`:s,c&&n.push(c),i+=c.length,h||(n.push(["strong",v]),i+=v.length,i>=100&&n.push(" …"))};let m=p.indexOf(t,l);if(m===-1)return null;for(;m>=0;){const s=m+t.length;if(d(a.slice(l,m)),l=s,i>100)break;m=p.indexOf(t,l)}return i<100&&d(a.slice(l),!0),n},E=a=>a.reduce((v,{type:p})=>v+(p==="title"?50:p==="heading"?20:p==="custom"?10:1),0),de=(a,v)=>{var p;const t={};for(const[n,l]of Object.entries(v)){const i=((p=v[n.replace(/\/[^\\]*$/,"")])==null?void 0:p.title)||"",d=`${i?`${i} > `:""}${l.title}`,m=S(l.title,a);m&&(t[d]=[...t[d]||[],{type:"title",path:n,display:m}]),l.customFields&&Object.entries(l.customFields).forEach(([s,h])=>{h.forEach(c=>{const o=S(c,a);o&&(t[d]=[...t[d]||[],{type:"custom",path:n,index:s,display:o}])})});for(const s of l.contents){const h=S(s.header,a);h&&(t[d]=[...t[d]||[],{type:"heading",path:n+(s.slug?`#${s.slug}`:""),display:h}]);for(const c of s.contents){const o=S(c,a);o&&(t[d]=[...t[d]||[],{type:"content",header:s.header,path:n+(s.slug?`#${s.slug}`:""),display:o}])}}}return Object.keys(t).sort((n,l)=>E(t[n])-E(t[l])).map(n=>({title:n,contents:t[n]}))},he=a=>{const v=b(),p=f([]),t=w(()=>pe.value[v.value]),n=B(l=>{p.value=l?de(l,t.value):[]},oe);return le([a,v],()=>{n(a.value)}),p};var ze=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:v}){const p=_(),t=ee(),n=b(),l=P(re),{history:i,addHistory:d,removeHistory:m}=ie(),s=se(a,"query"),h=he(s),c=f(0),o=f(0),F=f(),x=w(()=>h.value.length>0),U=w(()=>h.value[c.value]||null),A=()=>{c.value=c.value>0?c.value-1:h.value.length-1,o.value=U.value.contents.length-1},R=()=>{c.value=c.value<h.value.length-1?c.value+1:0,o.value=0},V=()=>{o.value<U.value.contents.length-1?o.value=o.value+1:R()},T=()=>{o.value>0?o.value=o.value-1:A()},q=r=>r.map(u=>typeof u=="string"?u:e(u[0],u[1])),N=r=>{if(r.type==="custom"){const u=ne[r.index]||"$content",[H,L=""]=typeof u=="object"?u[n.value].split("$content"):u.split("$content");return q([H,...r.display,L])}return q(r.display)},C=()=>{c.value=0,o.value=0,v("updateQuery",""),v("close")};return ae(()=>{J("keydown",r=>{if(x.value){if(r.key==="ArrowUp")T();else if(r.key==="ArrowDown")V();else if(r.key==="Enter"){const u=U.value.contents[o.value];t.path!==u.path&&(d(u),p.push(u.path),C())}}}),Q(F.value,{reserveScrollBarGap:!0})}),te(()=>{O()}),()=>e("div",{class:["search-pro-result",{empty:s.value===""?i.value.length===0:!x.value}],ref:F},s.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),i.value.map((r,u)=>e(Z,{to:r.path,class:["search-pro-result-item",{active:o.value===u}],onClick:()=>{console.log("click"),C()}},()=>[e(I,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",N(r))]),e("button",{class:"search-pro-close-icon",onClick:H=>{H.preventDefault(),H.stopPropagation(),m(u)}},e(G))]))])):l.value.emptyHistory:x.value?e("ul",{class:"search-pro-result-list"},h.value.map(({title:r,contents:u},H)=>{const L=c.value===H;return e("li",{class:["search-pro-result-list-item",{active:L}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),u.map((y,Y)=>{const k=L&&o.value===Y;return e(Z,{to:y.path,class:["search-pro-result-item",{active:k,"aria-selected":k}],onClick:()=>{d(y),C()}},()=>[y.type==="content"?null:e(y.type==="title"?W:y.type==="heading"?M:X,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",N(y))])])})])})):l.value.emptyResult)}});export{ze as default};
