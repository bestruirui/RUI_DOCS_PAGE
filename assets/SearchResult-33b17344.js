import{u as C,a as X,M as G,b as U,d as B,e as T,f as g,L as D,g as I}from"./app-fb8ac02d.js";import{r as H,h as V,c as $,y as _,U as ee,Y as te,o as se,z as ae,j as e,Z as Y,w as le}from"./framework-e618a78f.js";const oe="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";const N=()=>e(g,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));N.displayName="CloseIcon";const Z=()=>e(g,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));Z.displayName="HeadingIcon";const P=()=>e(g,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));P.displayName="HeartIcon";const J=()=>e(g,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));J.displayName="HistoryIcon";const M=()=>e(g,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));M.displayName="TitleIcon";const ue={},re=300,w=5,ne={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},ce="search-pro-history-results",L=C(ce,[]),ie=()=>({history:L,addHistory:s=>{L.value.length<w?L.value=[s,...L.value]:L.value=[s,...L.value.slice(0,w-1)]},removeHistory:s=>{L.value=[...L.value.slice(0,s),...L.value.slice(s+1)]}}),ve=H(oe),he=V(()=>JSON.parse(D(ve.value))),W=(s,v)=>{const h=s.toLowerCase(),a=v.toLowerCase(),u=[];let l=0,i=0;const p=(t,d=!1)=>{let o="";i===0?o=t.length>20?`… ${t.slice(-20)}`:t:d?o=t.length+i>100?`${t.slice(0,100-i)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&u.push(o),i+=o.length,d||(u.push(["strong",v]),i+=v.length,i>=100&&u.push(" …"))};let m=h.indexOf(a,l);if(m===-1)return null;for(;m>=0;){const t=m+a.length;if(p(s.slice(l,m)),l=t,i>100)break;m=h.indexOf(a,l)}return i<100&&p(s.slice(l),!0),u},x=s=>s.reduce((v,{type:h})=>v+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),pe=(s,v)=>{var h;const a={};for(const[u,l]of Object.entries(v)){const i=((h=v[u.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",p=`${i?`${i} > `:""}${l.title}`,m=W(l.title,s);m&&(a[p]=[...a[p]||[],{type:"title",path:u,display:m}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(o=>{const r=W(o,s);r&&(a[p]=[...a[p]||[],{type:"custom",path:u,index:t,display:r}])})});for(const t of l.contents){const d=W(t.header,s);d&&(a[p]=[...a[p]||[],{type:"heading",path:u+(t.slug?`#${t.slug}`:""),display:d}]);for(const o of t.contents){const r=W(o,s);r&&(a[p]=[...a[p]||[],{type:"content",header:t.header,path:u+(t.slug?`#${t.slug}`:""),display:r}])}}}return Object.keys(a).sort((u,l)=>x(a[u])-x(a[l])).map(u=>({title:u,contents:a[u]}))},de=s=>{const v=X(),h=H([]),a=V(()=>he.value[v.value]),u=I(l=>{h.value=l?pe(l,a.value):[]},re);return le([s,v],()=>{u(s.value)}),h};var Le=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:s=>!0},setup(s,{emit:v}){const h=_(),a=ee(),u=X(),l=G(ne),{history:i,addHistory:p,removeHistory:m}=ie(),t=te(s,"query"),d=de(t),o=H(0),r=H(0),F=H(),k=V(()=>d.value.length>0),q=V(()=>d.value[o.value]||null),O=()=>{o.value=o.value>0?o.value-1:d.value.length-1,r.value=q.value.contents.length-1},Q=()=>{o.value=o.value<d.value.length-1?o.value+1:0,r.value=0},R=()=>{r.value<q.value.contents.length-1?r.value=r.value+1:Q()},S=()=>{r.value>0?r.value=r.value-1:O()},K=n=>n.map(c=>typeof c=="string"?c:e(c[0],c[1])),A=n=>{if(n.type==="custom"){const c=ue[n.index]||"$content",[f,b=""]=typeof c=="object"?c[u.value].split("$content"):c.split("$content");return K([f,...n.display,b])}return K(n.display)},z=()=>{o.value=0,r.value=0,v("updateQuery",""),v("close")};return se(()=>{U("keydown",n=>{if(k.value){if(n.key==="ArrowUp")S();else if(n.key==="ArrowDown")R();else if(n.key==="Enter"){const c=q.value.contents[r.value];a.path!==c.path&&(p(c),h.push(c.path),z())}}}),B(F.value,{reserveScrollBarGap:!0})}),ae(()=>{T()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?i.value.length===0:!k.value}],ref:F},t.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),i.value.map((n,c)=>e(Y,{to:n.path,class:["search-pro-result-item",{active:r.value===c}],onClick:()=>{console.log("click"),z()}},()=>[e(J,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[n.type==="content"&&n.header?e("div",{class:"content-header"},n.header):null,e("div",A(n))]),e("button",{class:"search-pro-close-icon",onClick:f=>{f.preventDefault(),f.stopPropagation(),m(c)}},e(N))]))])):l.value.emptyHistory:k.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:n,contents:c},f)=>{const b=o.value===f;return e("li",{class:["search-pro-result-list-item",{active:b}]},[e("div",{class:"search-pro-result-title"},n||"Documentation"),c.map((y,j)=>{const E=b&&r.value===j;return e(Y,{to:y.path,class:["search-pro-result-item",{active:E,"aria-selected":E}],onClick:()=>{p(y),z()}},()=>[y.type==="content"?null:e(y.type==="title"?M:y.type==="heading"?Z:P,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",A(y))])])})])})):l.value.emptyResult)}});export{Le as default};
