import{u as U,a as q,M as D,b as J,d as Q,e as P,f as L,L as G,g as O}from"./app-536aadf0.js";import{r as x,h as b,c as $,y as _,U as ee,Y as te,o as se,z as ae,j as e,Z as S,w as le}from"./framework-e618a78f.js";const oe="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";const z=()=>e(L,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));z.displayName="CloseIcon";const A=()=>e(L,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));A.displayName="HeadingIcon";const Y=()=>e(L,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));Y.displayName="HeartIcon";const K=()=>e(L,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));K.displayName="HistoryIcon";const I=()=>e(L,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));I.displayName="TitleIcon";const ce={},re=300,X=5,ne={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},ue="search-pro-history-results",m=U(ue,[]),ie=()=>({history:m,addHistory:s=>{m.value.length<X?m.value=[s,...m.value]:m.value=[s,...m.value.slice(0,X-1)]},removeHistory:s=>{m.value=[...m.value.slice(0,s),...m.value.slice(s+1)]}}),pe=x(oe),he=b(()=>JSON.parse(G(pe.value))),C=(s,p)=>{const h=s.toLowerCase(),a=p.toLowerCase(),c=[];let l=0,i=0;const v=(t,y=!1)=>{let o="";i===0?o=t.length>20?`… ${t.slice(-20)}`:t:y?o=t.length+i>100?`${t.slice(0,100-i)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&c.push(o),i+=o.length,y||(c.push(["strong",p]),i+=p.length,i>=100&&c.push(" …"))};let d=h.indexOf(a,l);if(d===-1)return null;for(;d>=0;){const t=d+a.length;if(v(s.slice(l,d)),l=t,i>100)break;d=h.indexOf(a,l)}return i<100&&v(s.slice(l),!0),c},k=s=>s.reduce((p,{type:h})=>p+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),ve=(s,p)=>{var h;const a={};for(const[c,l]of Object.entries(p)){const i=((h=p[c.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",v=`${i?`${i} > `:""}${l.title}`,d=C(l.title,s);d&&(a[v]=[...a[v]||[],{type:"title",path:c,display:d}]),l.customFields&&Object.entries(l.customFields).forEach(([t,y])=>{y.forEach(o=>{const r=C(o,s);r&&(a[v]=[...a[v]||[],{type:"custom",path:c,index:t,display:r}])})});for(const t of l.contents){const y=C(t.header,s);y&&(a[v]=[...a[v]||[],{type:"heading",path:c+(t.slug?`#${t.slug}`:""),display:y}]);for(const o of t.contents){const r=C(o,s);r&&(a[v]=[...a[v]||[],{type:"content",header:t.header,path:c+(t.slug?`#${t.slug}`:""),display:r}])}}}return Object.keys(a).sort((c,l)=>k(a[c])-k(a[l])).map(c=>({title:c,contents:a[c]}))},ye=s=>{const p=q(),h=x([]),a=b(()=>he.value[p.value]),c=O(l=>{h.value=l?ve(l,a.value):[]},re);return le([s,p],()=>{c(s.value)}),h};var me=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:s=>!0},setup(s,{emit:p}){const h=_(),a=ee(),c=q(),l=D(ne),{history:i,addHistory:v,removeHistory:d}=ie(),t=te(s,"query"),y=ye(t),o=x(0),r=x(0),B=x(),R=b(()=>y.value.length>0),W=b(()=>y.value[o.value]||null),N=()=>{o.value=o.value>0?o.value-1:y.value.length-1,r.value=W.value.contents.length-1},V=()=>{o.value=o.value<y.value.length-1?o.value+1:0,r.value=0},T=()=>{r.value<W.value.contents.length-1?r.value=r.value+1:V()},w=()=>{r.value>0?r.value=r.value-1:N()},H=n=>n.map(u=>typeof u=="string"?u:e(u[0],u[1])),F=n=>{if(n.type==="custom"){const u=ce[n.index]||"$content",[g,Z=""]=typeof u=="object"?u[c.value].split("$content"):u.split("$content");return H([g,...n.display,Z])}return H(n.display)},j=()=>{o.value=0,r.value=0,p("updateQuery",""),p("close")};return se(()=>{J("keydown",n=>{if(R.value){if(n.key==="ArrowUp")w();else if(n.key==="ArrowDown")T();else if(n.key==="Enter"){const u=W.value.contents[r.value];a.path!==u.path&&(v(u),h.push(u.path),j())}}}),Q(B.value,{reserveScrollBarGap:!0})}),ae(()=>{P()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?i.value.length===0:!R.value}],ref:B},t.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),i.value.map((n,u)=>e(S,{to:n.path,class:["search-pro-result-item",{active:r.value===u}],onClick:()=>{console.log("click"),j()}},()=>[e(K,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[n.type==="content"&&n.header?e("div",{class:"content-header"},n.header):null,e("div",F(n))]),e("button",{class:"search-pro-close-icon",onClick:g=>{g.preventDefault(),g.stopPropagation(),d(u)}},e(z))]))])):l.value.emptyHistory:R.value?e("ul",{class:"search-pro-result-list"},y.value.map(({title:n,contents:u},g)=>{const Z=o.value===g;return e("li",{class:["search-pro-result-list-item",{active:Z}]},[e("div",{class:"search-pro-result-title"},n||"Documentation"),u.map((f,E)=>{const M=Z&&r.value===E;return e(S,{to:f.path,class:["search-pro-result-item",{active:M,"aria-selected":M}],onClick:()=>{v(f),j()}},()=>[f.type==="content"?null:e(f.type==="title"?I:f.type==="heading"?A:Y,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[f.type==="content"&&f.header?e("div",{class:"content-header"},f.header):null,e("div",F(f))])])})])})):l.value.emptyResult)}});export{me as default};
